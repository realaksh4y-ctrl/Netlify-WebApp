<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stream2Series</title>
    <style>
        body {
            background-color: #0a0a0a;
            color: #e0e0e0;
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #111;
            padding: 10px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 2px solid #007bff;
        }

        .logo {
            font-size: 26px;
            font-weight: bold;
            color: #007bff;
        }

        .search-bar {
            width: 300px;
            position: relative;
        }

        .search-bar input {
            width: 100%;
            padding: 8px 12px;
            border-radius: 4px;
            border: none;
            background: #222;
            color: #fff;
        }

        .suggestions {
            position: absolute;
            background: #111;
            width: 100%;
            border: 1px solid #333;
            max-height: 200px;
            overflow-y: auto;
            display: none;
        }

        .suggestions div {
            padding: 8px;
            cursor: pointer;
        }

        .suggestions div:hover {
            background: #007bff;
        }

        .section {
            margin: 20px;
        }

        .section h2 {
            border-left: 4px solid #007bff;
            padding-left: 10px;
        }

        .movie-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

        .movie-card {
            background-color: #111;
            border-radius: 8px;
            width: 180px;
            text-align: center;
            transition: transform 0.3s;
            cursor: pointer;
        }

        .movie-card:hover {
            transform: scale(1.05);
        }

        .movie-card img {
            width: 100%;
            border-radius: 8px 8px 0 0;
        }

        .movie-details {
            padding: 10px;
        }
    </style>
</head>
<body>

<header>
    <div class="logo">Stream2Series</div>
    <div class="search-bar">
        <input type="text" id="searchInput" placeholder="Search movies or series...">
        <div class="suggestions" id="suggestions"></div>
    </div>
</header>

<main>
    <section class="section" id="hindi">
        <h2>Hindi Movies</h2>
        <div class="movie-grid" id="hindiMovies"></div>
    </section>

    <section class="section" id="english">
        <h2>English Movies</h2>
        <div class="movie-grid" id="englishMovies"></div>
    </section>

    <section class="section" id="webseries">
        <h2>Web Series</h2>
        <div class="movie-grid" id="webSeries"></div>
    </section>
</main>

<script>
const apiKey = "8b7a81c";

async function fetchMovies(search, containerId) {
    const res = await fetch(`https://www.omdbapi.com/?apikey=${apiKey}&s=${search}`);
    const data = await res.json();
    const container = document.getElementById(containerId);
    container.innerHTML = "";

    if (data.Search) {
        data.Search.forEach(movie => {
            const div = document.createElement("div");
            div.classList.add("movie-card");
            div.innerHTML = `
                <img src="${movie.Poster !== "N/A" ? movie.Poster : 'https://via.placeholder.com/200'}" alt="${movie.Title}">
                <div class="movie-details">${movie.Title}</div>
            `;
            div.addEventListener("click", () => {
                const allowedDomain = "www.anurag.com";
                const movieUrl = `movie.html?id=${movie.imdbID}`;
                if (window.location.hostname === allowedDomain) {
                    window.location.href = movieUrl;
                } else {
                    alert("Access restricted to www.anurag.com only.");
                }
            });
            container.appendChild(div);
        });
    }
}

// Search suggestions
const searchInput = document.getElementById("searchInput");
const suggestions = document.getElementById("suggestions");

searchInput.addEventListener("input", async function () {
    const query = this.value.trim();
    if (query.length < 3) {
        suggestions.style.display = "none";
        return;
    }
    const res = await fetch(`https://www.omdbapi.com/?apikey=${apiKey}&s=${query}`);
    const data = await res.json();
    suggestions.innerHTML = "";
    if (data.Search) {
        suggestions.style.display = "block";
        data.Search.slice(0, 5).forEach(item => {
            const div = document.createElement("div");
            div.textContent = item.Title;
            div.addEventListener("click", () => {
                const allowedDomain = "www.anurag.com";
                const movieUrl = `movie.html?id=${item.imdbID}`;
                if (window.location.hostname === allowedDomain) {
                    window.location.href = movieUrl;
                } else {
                    alert("Access restricted to www.anurag.com only.");
                }
            });
            suggestions.appendChild(div);
        });
    }
});

// Default categories
fetchMovies("Hindi", "hindiMovies");
fetchMovies("English", "englishMovies");
fetchMovies("web series", "webSeries");
</script>

</body>
</html>
